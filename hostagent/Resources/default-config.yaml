# Default configuration for Haven Host Agent
# Target state: machine/runtime capabilities only
# Per-run intent (what/when/how to ingest) is passed via API calls

service:
  port: 7090
  auth:
    header: X-Haven-Key
    secret: changeme  # CHANGE THIS IN PRODUCTION!

api:
  response_timeout_ms: 2000    # default wait before flipping to 202 (min 0, max 30000)
  status_ttl_minutes: 1440     # how long to retain run status & logs for polling

gateway:
  base_url: http://localhost:8085
  ingest_path: /v1/ingest
  ingest_file_path: /v1/ingest/file
  timeout_ms: 30000

logging:
  level: info                   # trace|debug|info|warn|error
  format: json                  # json|text
  paths:
    app: ~/.haven/hostagent.log
    error: ~/.haven/hostagent_error.log
    access: ~/.haven/hostagent_access.log

modules:
  imessage:
    enabled: true
    ocr_enabled: false          # capability default
    chat_db_path: ""            # Empty string uses system default
    attachments_path: ""        # Empty string uses system default
  
  ocr:
    enabled: true
    languages:
      - en
    timeout_ms: 15000
    recognition_level: accurate # fast|accurate
    include_layout: false
  
  entity:
    enabled: true
    types:
      - person
      - organization
      - place
    min_confidence: 0.6
  
  face:
    enabled: false
    min_face_size: 0.01         # Minimum face size as fraction of image
    min_confidence: 0.7         # Minimum detection confidence
    include_landmarks: false
  
  fswatch:
    enabled: false
    event_queue_size: 1024      # Maximum number of events to queue
    debounce_ms: 500            # Debounce interval for rapid file changes
  
  localfs:
    enabled: false
    event_queue_size: 1024      # Maximum number of events to queue
    debounce_ms: 500            # Debounce interval
    max_file_bytes: 104857600   # 100MB default
  
  contacts:
    enabled: false
  
  mail:
    enabled: false
    redact_pii: true
