site_name: Haven Documentation
site_description: "Documentation hub for Haven services and operations."
site_url: "https://chrispatten.github.io/haven/"

theme:
  name: material

nav:
  - Home: index.md
  - Getting Started:
      - Getting Started: getting-started.md
      - Haven.app Guide: guides/havenui.md
      - Repository Overview: guides/README.md
  - Architecture:
      - Overview: architecture/overview.md
      - Services: architecture/services.md
      - Technical Reference: reference/technical_reference.md
  - Collectors:
      - iMessage Collector: guides/collectors/imessage.md
      - Local Files Collector: guides/collectors/localfs.md
      - Contacts Collector: guides/collectors/contacts.md
      - Email Collectors: guides/collectors/email.md
  - Configuration:
      - Configuration Reference: reference/configuration.md
  - API:
      - Gateway API: api/gateway.md
      - Gateway Interactive Reference: api/gateway-reference.html
      - Functional Guide: reference/functional_guide.md
  - Reference:
      - Schema v2 Reference: reference/SCHEMA_V2_REFERENCE.md
      - Backup & Restore: reference/BACKUP_RESTORE.md
      - Relationship Features: reference/relationship_features.md
      - Graph Reference: reference/graph.md
      - Haven LLM Provider: reference/haven_llm.md
      - Mail.app Information:
          - Mail.app Cache Structure: reference/mail_app_cache_structure.md
          - Envelope Index Schema: reference/Envelope_Index_schema.md
  - Implementation:
      - Collector Implementation: hostagent/index.md
      - Email Utilities: hostagent/email-utilities.md
      - Email Local Collector: hostagent/email-local-collector.md
      - Email IMAP Collector: hostagent/email-imap-collector.md
      - Email Gateway Submission: hostagent/email-gateway-submission.md
      - HostAgent README: hostagent/hostagent-readme.md
  - Operations:
      - Local Development: operations/local-dev.md
      - Deployment: operations/deploy.md
  - Contributing: contributing.md
  - Changelog: changelog.md

docs_dir: docs

markdown_extensions:
  - admonition
  - codehilite
  - toc:
      permalink: true

extra:
  openapi_specs:
    - id: gateway
      name: Gateway API
      description: "Public ingestion, search, and orchestration endpoints exposed by the Gateway service."
      source: openapi/gateway.yaml
      output: openapi/gateway.yaml
      page: api/gateway.md

plugins:
  - search
  - mkdocs-simple-hooks:
      hooks:
        on_pre_build: scripts.docs_hooks:prepare_openapi_assets
        on_post_build: scripts.docs_hooks:cleanup_openapi_assets
